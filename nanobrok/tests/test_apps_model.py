import unittest
from nanobrok.models import App, AppSchema, PacketType
from pprint import pprint
from marshmallow import ValidationError
from nanobrok.ext.database import db
from datetime import datetime
from nanobrok.blueprints.webui.utils import remove_key_from_dict

# This file is part of the Nanobrok Open Source Project.
# nanobrok is licensed under the Apache 2.0.

# Copyright 2021 p0cL4bs Team - Marcos Bomfim (mh4x0f)

# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at

# http://www.apache.org/licenses/LICENSE-2.0

# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.


class TestAppSchema(unittest.TestCase):
    def setUp(self):
        pass

    def test_packet_data_schema(self):
        app_data = {
            "name": "HittoCore",
            "icon": ",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",
            "version_name": "6.7.1",
            "package_name": "com.hittocore.mh4x0f",
            "installed_at": 1508484583259,
            "updated_at": 1615727780,
            "sourceDir": "/data/app/MiDrive/MiDrive.apk",
            "dataDir": "/data/user/0/com.miui.newmidrive",
        }
        schema = AppSchema()
        try:
            result = schema.load(remove_key_from_dict(app_data, {"data"}))
        except ValidationError as err:
            print(err.messages)
            print(err.valid_data)

        app = App(**result)

        self.assertEqual(app.package_name, "com.hittocore.mh4x0f")
        self.assertEqual(
            app.installed_at, datetime.fromtimestamp(1508484583259 / 1000.0)
        )


if __name__ == "__main__":
    unittest.main()
